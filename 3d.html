<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CalcPro True 3D</title>
    <style>
        body { margin: 0; overflow: hidden; background: radial-gradient(circle, #111 0%, #000 100%); font-family: sans-serif; }
        canvas { display: block; }
        #ui {
            position: absolute; width: 100%; height: 100%;
            pointer-events: none; z-index: 10;
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 20px; box-sizing: border-box;
        }
        .neon { color: #00ff88; text-shadow: 0 0 15px #00ff88; font-family: monospace; font-weight: bold; }
    </style>
</head>
<body>

    <div id="ui">
        <div class="neon">MODE: TRUE_3D_SOLID<br>LIGHTING: ENABLED</div>
        <div class="neon" style="text-align: center; font-size: 20px;">CalcPro © Lebbar Yahya</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        window.onload = function() {
            // Configuration de la scène
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            
            // On force le moteur à utiliser le mode le plus compatible possible
            const renderer = new THREE.WebGLRenderer({ 
                antialias: true, 
                alpha: true,
                precision: "mediump" // Plus compatible pour les puces mobiles
            });
            
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            // --- LUMIÈRE (C'est ça qui fait le "True 3D") ---
            const ambientLight = new THREE.AmbientLight(0x404040, 2); // Lumière globale
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0x00ff88, 5, 50); // Lumière de projecteur
            pointLight.position.set(10, 10, 10);
            scene.add(pointLight);

            // --- L'OBJET SOLIDE (MESH) ---
            // Un TorusKnot avec des faces réelles
            const geometry = new THREE.TorusKnotGeometry(7, 2.5, 100, 16);
            
            // Matériau "Phong" : il brille et réagit à la lumière
            const material = new THREE.MeshPhongMaterial({
                color: 0x00ff88,
                shininess: 100,
                specular: 0xffffff,
                flatShading: false // Lissage des faces pour un look pro
            });

            const mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);

            camera.position.z = 25;

            // --- ANIMATION ---
            function animate() {
                requestAnimationFrame(animate);

                // Rotation fluide
                mesh.rotation.y += 0.01;
                mesh.rotation.x += 0.005;

                // Faire bouger la lumière pour voir les reflets
                const time = Date.now() * 0.001;
                pointLight.position.x = Math.sin(time) * 15;
                pointLight.position.y = Math.cos(time) * 15;

                renderer.render(scene, camera);
            }

            // Gestion du tactile pour l'interaction
            let isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            window.addEventListener(isMobile ? 'touchmove' : 'mousemove', (e) => {
                const x = isMobile ? e.touches[0].clientX : e.clientX;
                const y = isMobile ? e.touches[0].clientY : e.clientY;
                
                mesh.rotation.z = (x / window.innerWidth) * 2;
            });

            animate();

            // Redimensionnement
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };
    </script>
</body>
</html>
