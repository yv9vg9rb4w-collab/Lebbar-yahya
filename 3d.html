<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Calculatrice 3D Scientifique - CalcPro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { background:#121212; color:white; font-family:Arial,sans-serif; margin:0; display:flex; flex-direction:column; align-items:center; }
h1 { color:#00ffcc; margin:15px 0; text-align:center; }
#coords { color:#00ffcc; margin:10px; font-size:14px; }
.toolbar { display:flex; gap:10px; margin-bottom:10px; flex-wrap:wrap; justify-content:center; }
.toolbar button { padding:10px 16px; border:none; border-radius:8px; background:#2563eb; color:white; font-size:14px; cursor:pointer; transition:0.2s; }
.toolbar button:hover { transform:scale(1.05); }
#inputPanel { display:flex; gap:5px; margin-bottom:10px; flex-wrap:wrap; justify-content:center; }
#inputPanel input { width:60px; padding:5px; border-radius:5px; border:none; text-align:center; }
#container { width:100%; height:500px; border-radius:12px; }
footer { margin-top:5px; text-align:center; font-size:14px; color:#aaa; }
</style>
</head>
<body>

<h1>ðŸ§­ Calculatrice 3D Scientifique - CalcPro</h1>

<div class="toolbar">
  <button id="addPointBtn">Ajouter Point</button>
  <button id="connectBtn">Connecter Points</button>
  <button id="clearBtn">Effacer</button>
</div>

<div id="inputPanel">
  <input id="xInput" type="number" placeholder="X">
  <input id="yInput" type="number" placeholder="Y">
  <input id="zInput" type="number" placeholder="Z">
  <button id="placeBtn">Placer</button>
</div>

<div id="coords">CoordonnÃ©es : x=0, y=0, z=0</div>
<div id="container"></div>
<footer>DÃ©veloppeur: <strong>Lebbar Yahya</strong></footer>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

<script>
// === Setup ===
const container = document.getElementById('container');
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x1e1e1e);

const camera = new THREE.PerspectiveCamera(75, container.clientWidth/container.clientHeight, 0.1, 1000);
camera.position.set(15,15,15);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(container.clientWidth, container.clientHeight);
container.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

// === Axes et Grille ===
scene.add(new THREE.AxesHelper(10));
scene.add(new THREE.GridHelper(20,20,0x444444,0x888888));

// === Variables ===
let points = [];
let segments = [];
let lastPoint = null;
let addPointMode = false;
let connectMode = false;

const coordsDisplay = document.getElementById('coords');

// === Boutons ===
document.getElementById("addPointBtn").onclick = ()=>{
  addPointMode = !addPointMode;
  connectMode = false;
  lastPoint = null;
  document.getElementById("addPointBtn").style.background = addPointMode?"#22c55e":"#2563eb";
  document.getElementById("connectBtn").style.background = "#2563eb";
};

document.getElementById("connectBtn").onclick = ()=>{
  connectMode = !connectMode;
  addPointMode = false;
  lastPoint = null;
  document.getElementById("connectBtn").style.background = connectMode?"#22c55e":"#2563eb";
  document.getElementById("addPointBtn").style.background = "#2563eb";
};

document.getElementById("clearBtn").onclick = ()=>{
  points.forEach(p=>scene.remove(p));
  segments.forEach(s=>scene.remove(s));
  points = [];
  segments = [];
  lastPoint = null;
  coordsDisplay.innerText = "CoordonnÃ©es : x=0, y=0, z=0";
};

// === Fonctions ===
function createPoint(x,y,z){
  const geo = new THREE.SphereGeometry(0.3,16,16);
  const mat = new THREE.MeshBasicMaterial({color:0xffeb3b});
  const sphere = new THREE.Mesh(geo, mat);
  sphere.position.set(x,y,z);
  scene.add(sphere);
  points.push(sphere);
  coordsDisplay.innerText = `CoordonnÃ©es : x=${x}, y=${y}, z=${z}`;
  return sphere;
}

function createSegment(p1,p2){
  const mat = new THREE.LineBasicMaterial({color:0x03a9f4});
  const geometry = new THREE.BufferGeometry().setFromPoints([p1.position.clone(), p2.position.clone()]);
  const line = new THREE.Line(geometry, mat);
  scene.add(line);
  segments.push(line);
}

// === Placer point depuis inputs ===
document.getElementById("placeBtn").onclick = ()=>{
  const x = parseFloat(document.getElementById("xInput").value) || 0;
  const y = parseFloat(document.getElementById("yInput").value) || 0;
  const z = parseFloat(document.getElementById("zInput").value) || 0;

  const point = createPoint(x,y,z);

  if(connectMode){
    if(lastPoint){
      createSegment(lastPoint, point);
    }
    lastPoint = point;
  }
};

// === Animation ===
function animate(){
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene,camera);
}
animate();

window.addEventListener('resize', ()=>{
  camera.aspect = container.clientWidth/container.clientHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(container.clientWidth, container.clientHeight);
});
</script>

</body>
</html>
